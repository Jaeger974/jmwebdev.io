<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Start your subscription!</title>

        <link rel="stylesheet" href="css/login.css"/> 
</head>
<body>

<%- include("partials/PS_header.ejs") %>

<% if (logoutMessage) { %>
  <div id="logout-alert" class="alert-success">
    <%= logoutMessage %>
  </div>
<% } %>

<% if (message) { %>
  <div class="alert-warning">
    <%= message %>
  </div>
<% } %>

<main class="main-container">
    <div class="login-container">
        <h2>Login to Your Account</h2>
        <form action="/login" method="POST" class="login-form">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
            <label for="password">Password:</label><div class="password-container">
            
            <input type="password" id="password" name="password" required>
            <button type="button" id="togglePassword" aria-label="Show password">Show</button>
            </div>
            <button type="submit" class="login-button">Login</button>
        </form>
        <p class="signup-link">Don't have an account? <a href="/newsignup">Sign up here</a></p>
    </div>

    <div class="OAuth-login-options">
        <p>Or login with:</p>
        <a href="/auth/google" role="button"><img class="google_logo" src="/static_files/Google_logo.png" alt="google logo"/>
        </a>

        <a href="/auth/facebook" role="button"><img class="facebook_logo" src="/static_files/facebook_logo.jpg" alt="facebook logo"/>
        </a>

        <a href="/auth/twitter" role="button"><img class="twitter_logo" src="/static_files/X_logo.png" alt="twitter logo"/>

        </a>

    </div>
</main>


<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" src="/Clientside_JS/PoetrySub.js" type="module"></script>

<script>
    const passwordInput = document.getElementById("password");
const togglePassword = document.getElementById("togglePassword");

togglePassword.addEventListener("click", () => {
  const type = passwordInput.getAttribute("type") === "password" ? "text" : "password";
  passwordInput.setAttribute("type", type);

  // Update button text
  togglePassword.textContent = type === "password" ? "Show" : "Hide";
});
</script>

<script>
  // Fade out logout message after 3 seconds
  window.addEventListener("DOMContentLoaded", () => {
    const alertBox = document.getElementById("logout-alert");
    if (alertBox) {
      setTimeout(() => {
        alertBox.style.transition = "opacity 1s ease";
        alertBox.style.opacity = "0";
        setTimeout(() => alertBox.remove(), 1000); // remove after fade
      }, 3000);
    }
  });
</script>


<%- include("partials/PS_footer.ejs") %>
</body>
</html>